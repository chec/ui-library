import { Meta, Props, Story, Preview } from '@storybook/addon-docs/blocks';
import { action } from '@storybook/addon-actions';
import { select } from '@storybook/addon-knobs';
import BaseOption from '../../components/BaseOption.vue';
import ChecOptionsMenu from '../../components/ChecOptionsMenu.vue';

<Meta title="Components/Options menu" component={ChecOptionsMenu} />

# Options menu

<Props of={ChecOptionsMenu} />

# Default

<Preview>
  <Story name="Default">
    {{
      components: {
        BaseOption,
        ChecOptionsMenu,
      },
      props: {
        menuPlacement: {
          default: select('Menu placement', [
            'auto',
            'auto-start',
            'auto-end',
            'top',
            'top-start',
            'top-end',
            'bottom',
            'bottom-start',
            'bottom-end',
            'right',
            'right-start',
            'right-end',
            'left',
            'left-start',
            'left-end'
          ], 'bottom'),
        },
      },
      methods: {
        action: action('option-selected'),
        confirm(message) {
          if (confirm(message)) {
            this.action();
            return true;
          }
          return false;
        }
      },
      template: `
      <div class="p-16 flex justify-center font-lato w-full text-gray-500">
        <div class="w-full relative">
          <table class="w-full">
            <thead>
              <tr>
                <th class="webhooks__id">ID</th>
                <th>Events</th>
                <th>URL</th>
                <th class="text-right">Options</th>
              </tr>
            </thead>
            <tbody>
              <tr
                class="webhook"
              >
                <td>
                  stuff
                </td>
                <td class="webhook__events">
                  other
                </td>
                <td>
                  more
                </td>
                <td class="flex justify-end">
                  <ChecOptionsMenu :open="true" :menu-placement="menuPlacement">
                    <BaseOption @option-selected="action">
                      Edit record
                    </BaseOption>
                    <BaseOption @option-selected="action">
                      Check for changes
                    </BaseOption>
                    <BaseOption @option-selected="confirm('Are you sure?')" destructive>
                      Delete record
                    </BaseOption>
                    <BaseOption :option="{ disabled: true }">
                      Disabled action
                    </BaseOption>
                  </ChecOptionsMenu>
                </td>
              </tr>
            </tbody>
          </table>
          <ChecOptionsMenu :open="true" :menu-placement="menuPlacement">
            <BaseOption @option-selected="action">
              Edit record
            </BaseOption>
            <BaseOption @option-selected="action">
              Check for changes
            </BaseOption>
            <BaseOption @option-selected="confirm('Are you sure?')" destructive>
              Delete record
            </BaseOption>
            <BaseOption :option="{ disabled: true }">
              Disabled action
            </BaseOption>
          </ChecOptionsMenu>
        </div>
      </div>`
    }}
  </Story>
</Preview>

# Right aligned

<Preview>
  <Story name="Right aligned">
    {{
      components: {
        BaseOption,
        ChecOptionsMenu,
      },
      methods: {
        action: action('option-selected'),
      },
      template: `
      <div class="p-16 flex justify-center font-lato w-full text-gray-500">
         <div class="w-64 relative">
          <ChecOptionsMenu position="right" :open="false">
            <BaseOption @option-selected="action">
              Edit record
            </BaseOption>
            <BaseOption @option-selected="action">
              Check for changes
            </BaseOption>
            <BaseOption @option-selected="action" destructive>
              Delete record
            </BaseOption>
            <BaseOption :option="{ disabled: true }">
              Disabled action
            </BaseOption>
          </ChecOptionsMenu>
        </div>
      </div>`
    }}
  </Story>
</Preview>

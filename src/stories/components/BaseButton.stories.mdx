import { Meta, Props, Story, Preview } from '@storybook/addon-docs/blocks';
import { action } from "@storybook/addon-actions";
import { withKnobs, object, boolean, text, select } from '@storybook/addon-knobs';
import { withInfo } from 'storybook-addon-vue-info'
import BaseButton from '../../components/BaseButton.vue';
import CloseIcon from '../../assets/svgs/close-icon.svg';
import ChecIcon from '../../components/ChecIcon.vue';
import makeVariants from '../helpers/makeVariants';

<Meta title="Form fields/Button" component={BaseButton} />

# Button

A multi-functional button that handles external links, internal links and generic button clicks

<details>
<summary>
Todo list
</summary>

- Support Vue router

</details>

<Props of={BaseButton} />

## Default

<Preview>
  <Story name="Defaults">
    {{
      components: {
        BaseButton,
        ChecIcon
      },
      props: {
        color: {
          default: select('Color', ['brand', 'primary', 'secondary', 'blue', 'green', 'red', 'purple', 'orange'], 'secondary'),
        },
        variant: {
          default: select('Variant', ['large', 'regular', 'small', 'round'], 'regular'),
        },
        disabled: {
          default: boolean('Disabled', false),
        },
        text: {
          default: text('Text', 'Button text'),
        },
        hasIcon: {
          default: boolean('Show Icon', true),
        },
        icon: {
          default: select('Icon', ['left', 'right', 'down', 'up', 'plus', 'close', 'check', 'more', 'download', 'upload', 'grip', 'minus', 'copy',], 'plus'),
        },
        iconPosition: {
          default: select('Icon Position', ['before', 'after'], 'before'),
        },
      },
      template: `
        <div class="py-16 flex justify-center">
          <base-button
            :color="color"
            :variant="variant"
            :icon-position="iconPosition"
            :disabled="disabled"
            :icon="hasIcon ? icon : null"
          >
            {{text}}
          </base-button>
        </div>
      `,
      methods: { action: action("clicked") }
    }}
  </Story>
</Preview>

## States and sizes

This is a button modified using the Color and Variant props.

<Preview>
  <Story name="States and sizes" decorators={[withKnobs()]}>
    {{
      computed: {
        possibilities() {
          return makeVariants({
            color: ['brand', 'primary', 'secondary', 'blue', 'green', 'red', 'purple', 'orange'],
            variant: ['large', 'regular', 'small', 'round'],
          }).map(possibility => ({
            ...possibility,
            label: `${possibility.color} - ${possibility.variant}`,
          }));
        }
      },
      components: {
        BaseButton
      },
      template: `
        <div class="py-16 grid grid-cols-4 gap-4 justify-center mx-20">
          <div v-for="{ color, variant, label } in possibilities">
            <base-button class="mx-auto capitalize" :color="color" :variant="variant">
              {{ label }}
            </base-button>
          </div>
        </div>`,
        methods: { action: action("clicked") }
    }}
  </Story>
</Preview>

## Full width

<Preview>
  <Story name="Full width">
    {{
      components: {
        BaseButton,
      },
      template: `
      <div class="py-16 px-8 justify-center">
        <base-button class="w-full" color="primary">
          Full width
        </base-button>
      </div>`,
    }}
  </Story>
</Preview>

## With icons

<Preview>
  <Story name="With icons" decorators={[withKnobs()]}>
    {{
      components: {
        BaseButton,
        CloseIcon
      },
      props: {
        color: {
          default: select('Color', ['brand', 'primary', 'secondary', 'blue', 'green', 'red', 'purple', 'orange'], 'secondary'),
        },
        variant: {
          default: select('Variant', ['large', 'regular', 'small', 'round'], 'regular'),
        },
        hasIcon: {
          default: boolean('Show Icon', true),
        },
      },
      template: `
        <div class="py-16 justify-center">
          <base-button class="mx-auto mb-4" :color="color" :variant="variant">
            Bigger, amazing
            <template v-if="hasIcon" v-slot:icon>
              <CloseIcon />
            </template>
          </base-button>
          <base-button class="mx-auto" :color="color" :variant="variant" icon-position="after">
            Bigger, amazing
            <template v-if="hasIcon" v-slot:icon>
              <CloseIcon />
            </template>
          </base-button>
        </div>`,
        methods: { action: action("clicked") }
    }}
  </Story>
</Preview>

## Icon only

<Preview>
  <Story name="Icon only" decorators={[withKnobs()]}>
    {{
      components: {
        BaseButton,
        CloseIcon
      },
      props: {
        color: {
          default: select('Color', ['brand', 'primary', 'secondary', 'blue', 'green', 'red', 'purple', 'orange'], 'brand'),
        },
      },
      template: `
        <div class="py-16 justify-center">
          <base-button class="mx-auto mb-4" :color="color" variant="small">
            <template v-slot:icon>
              <CloseIcon />
            </template>
          </base-button>
        </div>`,
        methods: { action: action("clicked") }
    }}
  </Story>
</Preview>

## Slot content

<Preview>
  <Story name="Slot Content" decorators={[withKnobs({escapeHTML: false})]}>
    {{
      components: {
        BaseButton
      },
      props: {
        color: {
          default: select('Color', ['brand', 'primary', 'secondary', 'blue', 'green', 'red', 'purple', 'orange'], 'secondary'),
        },
        variant: {
          default: select('Variant', ['large', 'regular', 'small', 'round'], 'regular'),
        },
        disabled: {
          default: select('Disabled', [true, false], false),
        },
        text: {
          default: text('Slot Content', '<b>Bold text</b>'),
        },
      },
      template: `
        <div class="py-16 flex justify-center">
          <base-button :color="color" :variant="variant" :disabled="disabled" v-html="text">
          </base-button>
        </div>
      `,
      methods: { action: action("clicked") }
    }}
  </Story>
</Preview>
